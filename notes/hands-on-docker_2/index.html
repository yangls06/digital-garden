<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="Dockerè¿›é˜¶ï¼šstep by step 0. å‚è€ƒ  Docker å¾®æœåŠ¡æ•™ç¨‹
å‰ç½®æ•™ç¨‹ï¼š
  Dockerå…¥é—¨ï¼šstep by step  ä¸€ã€é¢„å¤‡å·¥ä½œï¼šimage ä»“åº“çš„é•œåƒç½‘å€ æœ¬æ•™ç¨‹éœ€è¦ä»ä»“åº“ä¸‹è½½ image æ–‡ä»¶ï¼Œä½†æ˜¯å›½å†…è®¿é—® Docker çš„å®˜æ–¹ä»“åº“å¾ˆæ…¢ï¼Œè¿˜ç»å¸¸æ–­çº¿ï¼Œæ‰€ä»¥è¦æŠŠä»“åº“ç½‘å€æ”¹æˆå›½å†…çš„é•œåƒç«™ã€‚è¿™é‡Œæ¨èä½¿ç”¨å®˜æ–¹é•œåƒ registry."><title>Dockerè¿›é˜¶</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://yangls06.github.io/digital-garden//icon.png><link href=https://yangls06.github.io/digital-garden/styles.708c2658f93e3a9d323a1f9fded8f4b2.min.css rel=stylesheet><link href=https://yangls06.github.io/digital-garden/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://yangls06.github.io/digital-garden/js/darkmode.aa0630d04550405b827df945275af6c3.min.js></script>
<script src=https://yangls06.github.io/digital-garden/js/util.9825137f5e7825e8553c68ce39ac9e44.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script>
<script src=https://unpkg.com/@floating-ui/core@0.7.3></script>
<script src=https://unpkg.com/@floating-ui/dom@0.5.4></script>
<script src=https://yangls06.github.io/digital-garden/js/popover.9b72b70bd35617d0635e9d15463662b2.min.js></script>
<script src=https://yangls06.github.io/digital-garden/js/code-title.b35124ad8db0ba37162b886afb711cbc.min.js></script>
<script src=https://yangls06.github.io/digital-garden/js/clipboard.c20857734e53a3fb733b7443879efa61.min.js></script>
<script src=https://yangls06.github.io/digital-garden/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const BASE_URL="https://yangls06.github.io/digital-garden/",fetchData=Promise.all([fetch("https://yangls06.github.io/digital-garden/indices/linkIndex.6ec40daa1cd7c6f95c4bada3228d8c6e.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://yangls06.github.io/digital-garden/indices/contentIndex.8bc839d5ff514747e471ebb7e131bb80.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,s=t==n;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts(),initPopover("https://yangls06.github.io/digital-garden",!0,!0);const o=document.getElementById("footer");if(o){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=s&&!1;drawGraph("https://yangls06.github.io/digital-garden",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2})}},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{'â€™':"'"},throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/yangls06.github.io\/digital-garden\/js\/router.9d4974281069e9ebb189f642ae1e3ca2.min.js"
    attachSPARouting(init, render)
  </script></head><script async src="https://www.googletagmanager.com/gtag/js?id=G-GQ32FS7YEX"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-GQ32FS7YEX",{anonymize_ip:!1})}</script><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://yangls06.github.io/digital-garden/js/full-text-search.24827f874defbbc6d529926cbfcfb493.min.js></script><div class=singlePage><header><h1 id=page-title><a href=https://yangls06.github.io/digital-garden/>ğŸª´ æ— äººä¹‹è·¯</a></h1><div class=spacer></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><h1>Dockerè¿›é˜¶</h1><p class=meta>Last updated
Dec 14, 2022
<a href=https://github.com/yangls06/digital-garden/tree/hugo/content/notes/hands-on-docker_2.md rel=noopener>Edit Source</a></p><ul class=tags><li><a href=https://yangls06.github.io/digital-garden/tags/docker/>Docker</a></li></ul><aside class=mainTOC><details><summary>Table of Contents</summary><nav id=TableOfContents><ol><li><a href=#0-å‚è€ƒ>0. å‚è€ƒ</a><ol><li><a href=#ä¸€é¢„å¤‡å·¥ä½œimage-ä»“åº“çš„é•œåƒç½‘å€>ä¸€ã€é¢„å¤‡å·¥ä½œï¼šimage ä»“åº“çš„é•œåƒç½‘å€</a></li><li><a href=#äºŒæ–¹æ³•-aè‡ªå»º-wordpress-å®¹å™¨>äºŒã€æ–¹æ³• Aï¼šè‡ªå»º WordPress å®¹å™¨</a></li><li><a href=#ä¸‰æ–¹æ³•-bwordpress-å®˜æ–¹é•œåƒ>ä¸‰ã€æ–¹æ³• Bï¼šWordpress å®˜æ–¹é•œåƒ</a></li><li><a href=#å››æ–¹æ³•-cdocker-compose-å·¥å…·>å››ã€æ–¹æ³• Cï¼šDocker Compose å·¥å…·</a></li><li><a href=#äº”å‚è€ƒé“¾æ¥>äº”ã€å‚è€ƒé“¾æ¥</a></li></ol></li></ol></nav></details></aside><a href=#dockerè¿›é˜¶step-by-step><h1 id=dockerè¿›é˜¶step-by-step><span class=hanchor arialabel=Anchor># </span>Dockerè¿›é˜¶ï¼šstep by step</h1></a><a href=#0-å‚è€ƒ><h2 id=0-å‚è€ƒ><span class=hanchor arialabel=Anchor># </span>0. å‚è€ƒ</h2></a><p><a href=https://www.ruanyifeng.com/blog/2018/02/docker-wordpress-tutorial.html rel=noopener>Docker å¾®æœåŠ¡æ•™ç¨‹</a></p><p>å‰ç½®æ•™ç¨‹ï¼š</p><ul><li><a href=/digital-garden/notes/hands-on-docker_1/ rel=noopener class=internal-link data-src=/digital-garden/notes/hands-on-docker_1/>Dockerå…¥é—¨ï¼šstep by step</a></li></ul><a href=#ä¸€é¢„å¤‡å·¥ä½œimage-ä»“åº“çš„é•œåƒç½‘å€><h3 id=ä¸€é¢„å¤‡å·¥ä½œimage-ä»“åº“çš„é•œåƒç½‘å€><span class=hanchor arialabel=Anchor># </span>ä¸€ã€é¢„å¤‡å·¥ä½œï¼šimage ä»“åº“çš„é•œåƒç½‘å€</h3></a><p>æœ¬æ•™ç¨‹éœ€è¦ä»ä»“åº“ä¸‹è½½ image æ–‡ä»¶ï¼Œä½†æ˜¯å›½å†…è®¿é—® Docker çš„å®˜æ–¹ä»“åº“å¾ˆæ…¢ï¼Œè¿˜ç»å¸¸æ–­çº¿ï¼Œæ‰€ä»¥è¦æŠŠä»“åº“ç½‘å€æ”¹æˆå›½å†…çš„é•œåƒç«™ã€‚è¿™é‡Œæ¨èä½¿ç”¨å®˜æ–¹é•œåƒ registry.docker-cn.com ã€‚ä¸‹é¢æ˜¯æˆ‘çš„ Debian ç³»ç»Ÿçš„é»˜è®¤ä»“åº“ä¿®æ”¹æ–¹æ³•ï¼Œå…¶ä»–ç³»ç»Ÿçš„ä¿®æ”¹æ–¹æ³•å‚è€ƒ
<a href=https://www.docker-cn.com/registry-mirror rel=noopener>å®˜æ–¹æ–‡æ¡£</a>ã€‚</p><p>æ‰“å¼€<code>/etc/default/docker</code>æ–‡ä»¶ï¼ˆéœ€è¦<code>sudo</code>æƒé™ï¼‰ï¼Œåœ¨æ–‡ä»¶çš„åº•éƒ¨åŠ ä¸Šä¸€è¡Œã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl><span class=nv>DOCKER_OPTS</span><span class=o>=</span><span class=s2>&#34;--registry-mirror=https://registry.docker-cn.com&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>ç„¶åï¼Œé‡å¯ Docker æœåŠ¡ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>$ sudo service docker restart
</span></span></code></pre></td></tr></table></div></div><p>ç°åœ¨å°±ä¼šè‡ªåŠ¨ä»é•œåƒä»“åº“ä¸‹è½½ image æ–‡ä»¶äº†ã€‚</p><a href=#äºŒæ–¹æ³•-aè‡ªå»º-wordpress-å®¹å™¨><h3 id=äºŒæ–¹æ³•-aè‡ªå»º-wordpress-å®¹å™¨><span class=hanchor arialabel=Anchor># </span>äºŒã€æ–¹æ³• Aï¼šè‡ªå»º WordPress å®¹å™¨</h3></a><p>å‰é¢è¯´è¿‡ï¼Œæœ¬æ–‡ä¼šç”¨ä¸‰ç§æ–¹æ³•æ¼”ç¤º WordPress çš„å®‰è£…ã€‚ç¬¬ä¸€ç§æ–¹æ³•å°±æ˜¯è‡ªå»º WordPress å®¹å™¨ã€‚</p><a href=#21-å®˜æ–¹-çš„-php-image><h4 id=21-å®˜æ–¹-çš„-php-image><span class=hanchor arialabel=Anchor># </span>2.1 å®˜æ–¹ çš„ PHP image</h4></a><p>é¦–å…ˆï¼Œæ–°å»ºä¸€ä¸ªå·¥ä½œç›®å½•ï¼Œå¹¶è¿›å…¥è¯¥ç›®å½•ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>$ mkdir docker-demo <span class=o>&amp;&amp;</span> <span class=nb>cd</span> docker-demo
</span></span></code></pre></td></tr></table></div></div><p>ç„¶åï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>docker container run <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --rm <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --name wordpress <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --volume <span class=s2>&#34;</span><span class=nv>$PWD</span><span class=s2>/&#34;</span>:/var/www/html <span class=se>\\ </span></span></span><span class=line><span class=cl><span class=se></span>  php:5.6-apache
</span></span></code></pre></td></tr></table></div></div><p>ä¸Šé¢çš„å‘½ä»¤åŸºäº<code>php</code>çš„ image æ–‡ä»¶æ–°å»ºä¸€ä¸ªå®¹å™¨ï¼Œå¹¶ä¸”è¿è¡Œè¯¥å®¹å™¨ã€‚<code>php</code>çš„æ ‡ç­¾æ˜¯<code>5.6-apache</code>ï¼Œè¯´æ˜è£…çš„æ˜¯ PHP 5.6ï¼Œå¹¶ä¸”è‡ªå¸¦ Apache æœåŠ¡å™¨ã€‚è¯¥å‘½ä»¤çš„ä¸‰ä¸ªå‚æ•°å«ä¹‰å¦‚ä¸‹ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>--rmï¼šåœæ­¢è¿è¡Œåï¼Œè‡ªåŠ¨åˆ é™¤å®¹å™¨æ–‡ä»¶ã€‚
</span></span><span class=line><span class=cl>--name wordpressï¼šå®¹å™¨çš„åå­—å«åšwordpressã€‚
</span></span><span class=line><span class=cl>--volume <span class=s2>&#34;</span><span class=nv>$PWD</span><span class=s2>/&#34;</span>:/var/www/htmlï¼šå°†å½“å‰ç›®å½•ï¼ˆ<span class=nv>$PWD</span>ï¼‰æ˜ å°„åˆ°å®¹å™¨çš„/var/www/htmlï¼ˆApache å¯¹å¤–è®¿é—®çš„é»˜è®¤ç›®å½•ï¼‰ã€‚å› æ­¤ï¼Œå½“å‰ç›®å½•çš„ä»»ä½•ä¿®æ”¹ï¼Œéƒ½ä¼šåæ˜ åˆ°å®¹å™¨é‡Œé¢ï¼Œè¿›è€Œè¢«å¤–éƒ¨è®¿é—®åˆ°ã€‚
</span></span></code></pre></td></tr></table></div></div><p>è¿è¡Œä¸Šé¢çš„å‘½ä»¤ä»¥åï¼Œå¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œå‘½ä»¤è¡Œä¼šæç¤ºå®¹å™¨å¯¹å¤–çš„ IP åœ°å€ï¼Œè¯·è®°ä¸‹è¿™ä¸ªåœ°å€ï¼Œæˆ‘ä»¬è¦ç”¨å®ƒæ¥è®¿é—®å®¹å™¨ã€‚æˆ‘åˆ†é…åˆ°çš„ IP åœ°å€æ˜¯ 172.17.0.2ã€‚</p><p>æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—® 172.17.0.2ï¼Œä½ ä¼šçœ‹åˆ°ä¸‹é¢çš„æç¤ºã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>Forbidden
</span></span><span class=line><span class=cl>You don<span class=err>&#39;</span>t have permission to access / on this server.
</span></span></code></pre></td></tr></table></div></div><p>æ˜¯å› ä¸ºå®¹å™¨çš„<code>/var/www/html</code>ç›®å½•ï¼ˆä¹Ÿå°±æ˜¯æœ¬æœºçš„<code>docker-demo</code>ç›®å½•ï¼‰ä¸‹é¢ä»€ä¹ˆä¹Ÿæ²¡æœ‰ï¼Œæ— æ³•æä¾›å¯ä»¥è®¿é—®çš„å†…å®¹ã€‚</p><p>è¯·åœ¨æœ¬æœºçš„<code>docker-demo</code>ç›®å½•ä¸‹é¢ï¼Œæ·»åŠ ä¸€ä¸ªæœ€ç®€å•çš„ PHP æ–‡ä»¶<code>index.php</code>ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>&lt;?php 
</span></span><span class=line><span class=cl>phpinfo<span class=o>()</span><span class=p>;</span>
</span></span><span class=line><span class=cl>?&gt;
</span></span></code></pre></td></tr></table></div></div><p>ä¿å­˜ä»¥åï¼Œæµè§ˆå™¨åˆ·æ–°<code>172.17.0.2</code>ï¼Œåº”è¯¥å°±ä¼šçœ‹åˆ°ç†Ÿæ‚‰çš„<code>phpinfo</code>é¡µé¢äº†ã€‚</p><p><img src=https://happy3-data.oss-cn-hangzhou.aliyuncs.com/content-images/135ee4ef-bf47-4239-935a-2eab8f896575.jpeg width=auto alt=135ee4ef-bf47-4239-935a-2eab8f896575></p><p>2.2 æ‹·è´ WordPress å®‰è£…åŒ…</p><p>æ—¢ç„¶æœ¬åœ°çš„<code>docker-demo</code>ç›®å½•å¯ä»¥æ˜ å°„åˆ°å®¹å™¨é‡Œé¢ï¼Œé‚£ä¹ˆæŠŠ WordPress å®‰è£…åŒ…æ‹·è´åˆ°<code>docker-demo</code>ç›®å½•ä¸‹ï¼Œä¸å°±å¯ä»¥é€šè¿‡å®¹å™¨è®¿é—®åˆ° WordPress çš„å®‰è£…ç•Œé¢äº†å—ï¼Ÿ</p><p>é¦–å…ˆï¼Œåœ¨<code>docker-demo</code>ç›®å½•ä¸‹ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼ŒæŠ“å–å¹¶è§£å‹ WordPress å®‰è£…åŒ…ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>wget https://cn.wordpress.org/wordpress-4.9.4-zh_CN.tar.gz
</span></span><span class=line><span class=cl>tar -xvf wordpress-4.9.4-zh_CN.tar.gz
</span></span></code></pre></td></tr></table></div></div><p>è§£å‹ä»¥åï¼ŒWordPress çš„å®‰è£…æ–‡ä»¶ä¼šåœ¨<code>docker-demo/wordpress</code>ç›®å½•ä¸‹ã€‚</p><p>è¿™æ—¶æµè§ˆå™¨è®¿é—®<code>http://172.17.0.2/wordpress</code>ï¼Œå°±èƒ½çœ‹åˆ° WordPress çš„å®‰è£…æç¤ºäº†ã€‚</p><p><img src=https://happy3-data.oss-cn-hangzhou.aliyuncs.com/content-images/555d7606-f3b7-45d4-b440-a3e78ac456a5.jpeg width=auto alt=555d7606-f3b7-45d4-b440-a3e78ac456a5></p><a href=#23-å®˜æ–¹çš„-mysql-å®¹å™¨><h4 id=23-å®˜æ–¹çš„-mysql-å®¹å™¨><span class=hanchor arialabel=Anchor># </span>2.3 å®˜æ–¹çš„ MySQL å®¹å™¨</h4></a><p>WordPress å¿…é¡»æœ‰æ•°æ®åº“æ‰èƒ½å®‰è£…ï¼Œæ‰€ä»¥å¿…é¡»æ–°å»º MySQL å®¹å™¨ã€‚</p><p>æ‰“å¼€ä¸€ä¸ªæ–°çš„å‘½ä»¤è¡Œçª—å£ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>docker container run <span class=se>\\ </span></span></span><span class=line><span class=cl><span class=se></span>  -d <span class=se>\\ </span></span></span><span class=line><span class=cl><span class=se></span>  --rm <span class=se>\\ </span></span></span><span class=line><span class=cl><span class=se></span>  --name wordpressdb <span class=se>\\ </span></span></span><span class=line><span class=cl><span class=se></span>  --env <span class=nv>MYSQL_ROOT_PASSWORD</span><span class=o>=</span><span class=m>123456</span> <span class=se>\\ </span></span></span><span class=line><span class=cl><span class=se></span>  --env <span class=nv>MYSQL_DATABASE</span><span class=o>=</span>wordpress <span class=se>\\ </span></span></span><span class=line><span class=cl><span class=se></span>  mysql:5.7
</span></span></code></pre></td></tr></table></div></div><p>ä¸Šé¢çš„å‘½ä»¤ä¼šåŸºäº MySQL çš„ image æ–‡ä»¶ï¼ˆ5.7ç‰ˆæœ¬ï¼‰æ–°å»ºä¸€ä¸ªå®¹å™¨ã€‚è¯¥å‘½ä»¤çš„äº”ä¸ªå‘½ä»¤è¡Œå‚æ•°çš„å«ä¹‰å¦‚ä¸‹ã€‚</p><blockquote><ul><li><p><code>-d</code>ï¼šå®¹å™¨å¯åŠ¨åï¼Œåœ¨åå°è¿è¡Œã€‚</p></li><li><p><code>--rm</code>ï¼šå®¹å™¨ç»ˆæ­¢è¿è¡Œåï¼Œè‡ªåŠ¨åˆ é™¤å®¹å™¨æ–‡ä»¶ã€‚</p></li><li><p><code>--name wordpressdb</code>ï¼šå®¹å™¨çš„åå­—å«åš<code>wordpressdb</code></p></li><li><p><code>--env MYSQL_ROOT_PASSWORD=123456</code>ï¼šå‘å®¹å™¨è¿›ç¨‹ä¼ å…¥ä¸€ä¸ªç¯å¢ƒå˜é‡<code>MYSQL_ROOT_PASSWORD</code>ï¼Œè¯¥å˜é‡ä¼šè¢«ç”¨ä½œ MySQL çš„æ ¹å¯†ç ã€‚</p></li><li><p><code>--env MYSQL_DATABASE=wordpress</code>ï¼šå‘å®¹å™¨è¿›ç¨‹ä¼ å…¥ä¸€ä¸ªç¯å¢ƒå˜é‡<code>MYSQL_DATABASE</code>ï¼Œå®¹å™¨é‡Œé¢çš„ MySQL ä¼šæ ¹æ®è¯¥å˜é‡åˆ›å»ºä¸€ä¸ªåŒåæ•°æ®åº“ï¼ˆæœ¬ä¾‹æ˜¯<code>WordPress</code>ï¼‰ã€‚</p></li></ul></blockquote><p>è¿è¡Œä¸Šé¢çš„å‘½ä»¤ä»¥åï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œå‘½ä»¤è¡Œä¼šæ˜¾ç¤ºä¸€è¡Œå­—ç¬¦ä¸²ï¼Œè¿™æ˜¯å®¹å™¨çš„ IDï¼Œè¡¨ç¤ºå·²ç»æ–°å»ºæˆåŠŸäº†ã€‚</p><p>è¿™æ—¶ï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨ï¼Œä½ åº”è¯¥çœ‹åˆ°<code>wordpress</code>å’Œ<code>wordpressdb</code>ä¸¤ä¸ªå®¹å™¨æ­£åœ¨è¿è¡Œã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>docker container ls
</span></span><span class=line><span class=cl>CONTAINER ID   IMAGE            COMMAND                  CREATED          STATUS          PORTS                 NAMES
</span></span><span class=line><span class=cl>f01fe6ff7a31   mysql:5.7        <span class=s2>&#34;docker-entrypoint.sâ€¦&#34;</span>   <span class=m>15</span> seconds ago   Up <span class=m>13</span> seconds   3306/tcp, 33060/tcp   wordpressdb
</span></span><span class=line><span class=cl>b62e97351f5f   php:5.6-apache   <span class=s2>&#34;docker-php-entrypoiâ€¦&#34;</span>   <span class=m>32</span> seconds ago   Up <span class=m>30</span> seconds   80/tcp                wordpress
</span></span></code></pre></td></tr></table></div></div><p>å…¶ä¸­ï¼Œ<code>wordpressdb</code>æ˜¯åå°è¿è¡Œçš„ï¼Œå‰å°çœ‹ä¸è§å®ƒçš„è¾“å‡ºï¼Œå¿…é¡»ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>docker container logs wordpressdb
</span></span></code></pre></td></tr></table></div></div><a href=#24-å®šåˆ¶-php-å®¹å™¨><h4 id=24-å®šåˆ¶-php-å®¹å™¨><span class=hanchor arialabel=Anchor># </span>2.4 å®šåˆ¶ PHP å®¹å™¨</h4></a><p>ç°åœ¨ WordPress å®¹å™¨å’Œ MySQL å®¹å™¨éƒ½å·²ç»æœ‰äº†ã€‚æ¥ä¸‹æ¥ï¼Œè¦æŠŠ WordPress å®¹å™¨è¿æ¥åˆ° MySQL å®¹å™¨äº†ã€‚ä½†æ˜¯ï¼ŒPHP çš„å®˜æ–¹ image ä¸å¸¦æœ‰<code>mysql</code>æ‰©å±•ï¼Œå¿…é¡»è‡ªå·±æ–°å»º image æ–‡ä»¶ã€‚</p><p>é¦–å…ˆï¼Œåœæ‰ WordPress å®¹å™¨ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>docker container stop wordpress
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## åœæ‰ä¹‹å</span>
</span></span><span class=line><span class=cl>docker container ls              
</span></span><span class=line><span class=cl>CONTAINER ID   IMAGE       COMMAND                  CREATED         STATUS         PORTS                 NAMES
</span></span><span class=line><span class=cl>f01fe6ff7a31   mysql:5.7   <span class=s2>&#34;docker-entrypoint.sâ€¦&#34;</span>   <span class=m>3</span> minutes ago   Up <span class=m>3</span> minutes   3306/tcp, 33060/tcp   wordpressdb
</span></span></code></pre></td></tr></table></div></div><p>åœæ‰ä»¥åï¼Œç”±äº<code>--rm</code>å‚æ•°çš„ä½œç”¨ï¼Œè¯¥å®¹å™¨æ–‡ä»¶ä¼šè¢«è‡ªåŠ¨åˆ é™¤ã€‚</p><p>ç„¶åï¼Œåœ¨<code>docker-demo</code>ç›®å½•é‡Œé¢ï¼Œæ–°å»ºä¸€ä¸ª<code>Dockerfile</code>æ–‡ä»¶ï¼Œå†™å…¥ä¸‹é¢çš„å†…å®¹ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>FROM php:5.6-apache
</span></span><span class=line><span class=cl>RUN docker-php-ext-install mysqli
</span></span><span class=line><span class=cl>CMD apache2-foreground
</span></span></code></pre></td></tr></table></div></div><p>ä¸Šé¢ä»£ç çš„æ„æ€ï¼Œå°±æ˜¯åœ¨åŸæ¥ PHP çš„ image åŸºç¡€ä¸Šï¼Œå®‰è£…<code>mysqli</code>çš„æ‰©å±•ã€‚ç„¶åï¼Œå¯åŠ¨ Apacheã€‚</p><p>åŸºäºè¿™ä¸ª Dockerfile æ–‡ä»¶ï¼Œæ–°å»ºä¸€ä¸ªåä¸º<code>phpwithmysql</code>çš„ image æ–‡ä»¶ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>docker build -t phpwithmysql .
</span></span></code></pre></td></tr></table></div></div><a href=#25-wordpress-å®¹å™¨è¿æ¥-mysql><h4 id=25-wordpress-å®¹å™¨è¿æ¥-mysql><span class=hanchor arialabel=Anchor># </span>2.5 Wordpress å®¹å™¨è¿æ¥ MySQL</h4></a><p>ç°åœ¨åŸºäº phpwithmysql imageï¼Œé‡æ–°æ–°å»ºä¸€ä¸ª WordPress å®¹å™¨ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>docker container run <span class=se>\\ </span></span></span><span class=line><span class=cl><span class=se></span>  --rm <span class=se>\\ </span></span></span><span class=line><span class=cl><span class=se></span>  --name wordpress <span class=se>\\ </span></span></span><span class=line><span class=cl><span class=se></span>  --volume <span class=s2>&#34;</span><span class=nv>$PWD</span><span class=s2>/&#34;</span>:/var/www/html <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --link wordpressdb:mysql <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  phpwithmysql
</span></span></code></pre></td></tr></table></div></div><p>è·Ÿä¸Šä¸€æ¬¡ç›¸æ¯”ï¼Œä¸Šé¢çš„å‘½ä»¤å¤šäº†ä¸€ä¸ªå‚æ•°<code>--link wordpressdb:mysql</code>ï¼Œè¡¨ç¤º WordPress å®¹å™¨è¦è¿åˆ°<code>wordpressdb</code>å®¹å™¨ï¼Œå†’å·è¡¨ç¤ºè¯¥å®¹å™¨çš„åˆ«åæ˜¯<code>mysql</code>ã€‚</p><p>è¿™æ—¶è¿˜è¦æ”¹ä¸€ä¸‹<code>wordpress</code>ç›®å½•çš„æƒé™ï¼Œè®©å®¹å™¨å¯ä»¥å°†é…ç½®ä¿¡æ¯å†™å…¥è¿™ä¸ªç›®å½•ï¼ˆå®¹å™¨å†…éƒ¨å†™å…¥çš„<code>/var/www/html</code>ç›®å½•ï¼Œä¼šæ˜ å°„åˆ°è¿™ä¸ªç›®å½•ï¼‰ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>chmod -R <span class=m>777</span> wordpress
</span></span></code></pre></td></tr></table></div></div><p>æ¥ç€ï¼Œå›åˆ°æµè§ˆå™¨çš„<code>http://172.17.0.2/wordpress</code>é¡µé¢ï¼Œç‚¹å‡»"ç°åœ¨å°±å¼€å§‹ï¼&ldquo;æŒ‰é’®ï¼Œå¼€å§‹å®‰è£…ã€‚</p><p>WordPress æç¤ºè¦è¾“å…¥æ•°æ®åº“å‚æ•°ã€‚è¾“å…¥çš„å‚æ•°å¦‚ä¸‹ã€‚</p><p><img src=https://happy3-data.oss-cn-hangzhou.aliyuncs.com/content-images/7a2e3f14-a418-40ef-b5f8-8036fa3035b9.jpeg width=auto alt=7a2e3f14-a418-40ef-b5f8-8036fa3035b9></p><blockquote><ul><li><p>æ•°æ®åº“åï¼š<code>wordpress</code></p></li><li><p>ç”¨æˆ·åï¼š<code>root</code></p></li><li><p>å¯†ç ï¼š<code>123456</code></p></li><li><p>æ•°æ®åº“ä¸»æœºï¼š<code>mysql</code></p></li><li><p>è¡¨å‰ç¼€ï¼š<code>wp_</code>ï¼ˆä¸å˜ï¼‰</p></li></ul></blockquote><p>ç‚¹å‡»"ä¸‹ä¸€æ­¥"æŒ‰é’®ï¼Œå¦‚æœ Wordpress è¿æ¥æ•°æ®åº“æˆåŠŸï¼Œå°±ä¼šå‡ºç°ä¸‹é¢çš„é¡µé¢ï¼Œè¿™å°±è¡¨ç¤ºå¯ä»¥å®‰è£…äº†ã€‚</p><p><img src=https://happy3-data.oss-cn-hangzhou.aliyuncs.com/content-images/IdmeQaS9iG.jpg width=auto alt=IdmeQaS9iG></p><p>è‡³æ­¤ï¼Œè‡ªå»º WordPress å®¹å™¨çš„æ¼”ç¤ºå®Œæ¯•ï¼Œå¯ä»¥æŠŠæ­£åœ¨è¿è¡Œçš„ä¸¤ä¸ªå®¹å™¨å…³é—­äº†ï¼ˆå®¹å™¨æ–‡ä»¶ä¼šè‡ªåŠ¨åˆ é™¤ï¼‰ã€‚</p><img src=https://happy3-data.oss-cn-hangzhou.aliyuncs.com/content-images/4MkHfisE5P.jpg alt=4MkHfisE5P style=zoom:33%><p>å®‰è£…ä¹‹å</p><img src=https://happy3-data.oss-cn-hangzhou.aliyuncs.com/content-images/PXh6tI53nv.jpg alt=PXh6tI53nv style=zoom:50%><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>docker container stop wordpress wordpressdb
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>## ä¹‹å</span>
</span></span><span class=line><span class=cl>docker container ls
</span></span><span class=line><span class=cl>CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES
</span></span></code></pre></td></tr></table></div></div><a href=#ä¸‰æ–¹æ³•-bwordpress-å®˜æ–¹é•œåƒ><h3 id=ä¸‰æ–¹æ³•-bwordpress-å®˜æ–¹é•œåƒ><span class=hanchor arialabel=Anchor># </span>ä¸‰ã€æ–¹æ³• Bï¼šWordpress å®˜æ–¹é•œåƒ</h3></a><p>ä¸Šä¸€éƒ¨åˆ†çš„è‡ªå»º WordPress å®¹å™¨ï¼Œè¿˜æ˜¯æŒºéº»çƒ¦çš„ã€‚å…¶å®ä¸ç”¨è¿™ä¹ˆéº»çƒ¦ï¼ŒDocker å·²ç»æä¾›äº†å®˜æ–¹
<a href=https://hub.docker.com/_/wordpress/ rel=noopener>WordPress</a> imageï¼Œç›´æ¥ç”¨é‚£ä¸ªå°±å¯ä»¥äº†ã€‚æœ‰äº†ä¸Šä¸€éƒ¨åˆ†çš„åŸºç¡€ï¼Œä¸‹é¢çš„æ“ä½œå°±å¾ˆå®¹æ˜“ç†è§£äº†ã€‚</p><a href=#31-åŸºæœ¬ç”¨æ³•><h4 id=31-åŸºæœ¬ç”¨æ³•><span class=hanchor arialabel=Anchor># </span>3.1 åŸºæœ¬ç”¨æ³•</h4></a><p>é¦–å…ˆï¼Œæ–°å»ºå¹¶å¯åŠ¨ MySQL å®¹å™¨ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>docker container run <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -d <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --rm <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --name wordpressdb <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --env <span class=nv>MYSQL_ROOT_PASSWORD</span><span class=o>=</span><span class=m>123456</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --env <span class=nv>MYSQL_DATABASE</span><span class=o>=</span>wordpress <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  mysql:5.7
</span></span></code></pre></td></tr></table></div></div><p>ç„¶åï¼ŒåŸºäºå®˜æ–¹çš„ WordPress imageï¼Œæ–°å»ºå¹¶å¯åŠ¨ WordPress å®¹å™¨ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>docker container run <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -d <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --rm <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --name wordpress <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --env <span class=nv>WORDPRESS_DB_PASSWORD</span><span class=o>=</span><span class=m>123456</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --env <span class=nv>WORDPRESS_DB_USER</span><span class=o>=</span>root <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --link wordpressdb:mysql <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  wordpress
</span></span></code></pre></td></tr></table></div></div><p>ä¸Šé¢å‘½ä»¤ä¸­ï¼Œå„ä¸ªå‚æ•°çš„å«ä¹‰å‰é¢éƒ½è§£é‡Šè¿‡äº†ï¼Œå…¶ä¸­ç¯å¢ƒå˜é‡<code>WORDPRESS_DB_PASSWORD</code>æ˜¯ MySQL å®¹å™¨çš„æ ¹å¯†ç ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>docker container ls   
</span></span><span class=line><span class=cl>CONTAINER ID   IMAGE       COMMAND                  CREATED          STATUS          PORTS                 NAMES
</span></span><span class=line><span class=cl>ad6ee2dd4971   wordpress   <span class=s2>&#34;docker-entrypoint.sâ€¦&#34;</span>   <span class=m>48</span> seconds ago   Up <span class=m>35</span> seconds   80/tcp                wordpress
</span></span><span class=line><span class=cl>87f2d581abda   mysql:5.7   <span class=s2>&#34;docker-entrypoint.sâ€¦&#34;</span>   <span class=m>3</span> minutes ago    Up <span class=m>3</span> minutes    3306/tcp, 33060/tcp   wordpressdb
</span></span></code></pre></td></tr></table></div></div><p>ä¸Šé¢å‘½ä»¤æŒ‡å®š<code>wordpress</code>å®¹å™¨åœ¨åå°è¿è¡Œï¼Œå¯¼è‡´å‰å°çœ‹ä¸è§è¾“å‡ºï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æŸ¥å‡º<code>wordpress</code>å®¹å™¨çš„ IP åœ°å€ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>docker container inspect wordpress
</span></span><span class=line><span class=cl><span class=o>[</span>
</span></span><span class=line><span class=cl>    <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;Id&#34;</span>: <span class=s2>&#34;ad6ee2dd497184a397c8bd58df7b415b5081bff5b0e000a10daa0b970b38cf9c&#34;</span>,
</span></span><span class=line><span class=cl>        <span class=s2>&#34;Created&#34;</span>: <span class=s2>&#34;2022-08-26T02:16:36.222826772Z&#34;</span>,
</span></span><span class=line><span class=cl>        <span class=s2>&#34;Path&#34;</span>: <span class=s2>&#34;docker-entrypoint.sh&#34;</span>,
</span></span><span class=line><span class=cl>        <span class=s2>&#34;Args&#34;</span>: <span class=o>[</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;apache2-foreground&#34;</span>
</span></span><span class=line><span class=cl>        <span class=o>]</span>,
</span></span><span class=line><span class=cl>   ã€‚ã€‚ã€‚
</span></span><span class=line><span class=cl>            <span class=s2>&#34;GlobalIPv6PrefixLen&#34;</span>: 0,
</span></span><span class=line><span class=cl>            <span class=s2>&#34;IPAddress&#34;</span>: <span class=s2>&#34;172.17.0.3&#34;</span>,
</span></span><span class=line><span class=cl>            <span class=s2>&#34;IPPrefixLen&#34;</span>: 16,
</span></span><span class=line><span class=cl>            <span class=s2>&#34;IPv6Gateway&#34;</span>: <span class=s2>&#34;&#34;</span>,
</span></span><span class=line><span class=cl>   ã€‚ã€‚ã€‚
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>]</span>
</span></span></code></pre></td></tr></table></div></div><p>ä¸Šé¢å‘½ä»¤è¿è¡Œä»¥åï¼Œä¼šè¾“å‡ºå¾ˆå¤šå†…å®¹ï¼Œæ‰¾åˆ°<code>IPAddress</code>å­—æ®µå³å¯ã€‚æˆ‘çš„æœºå™¨è¿”å›çš„ IP åœ°å€æ˜¯<code>172.17.0.3</code>ã€‚</p><p>æµè§ˆå™¨è®¿é—®<code>172.17.0.3</code>ï¼Œå°±ä¼šçœ‹åˆ° WordPress çš„å®‰è£…æç¤ºã€‚</p><img src=https://happy3-data.oss-cn-hangzhou.aliyuncs.com/content-images/fOzoBcsIhF.jpg alt=fOzoBcsIhF style=zoom:33%>
<a href=#32-wordpress-å®¹å™¨çš„å®šåˆ¶><h4 id=32-wordpress-å®¹å™¨çš„å®šåˆ¶><span class=hanchor arialabel=Anchor># </span>3.2 WordPress å®¹å™¨çš„å®šåˆ¶</h4></a><p>åˆ°äº†ä¸Šä¸€æ­¥ï¼Œå®˜æ–¹ WordPress å®¹å™¨çš„å®‰è£…å°±å·²ç»æˆåŠŸäº†ã€‚ä½†æ˜¯ï¼Œè¿™ç§æ–¹æ³•æœ‰ä¸¤ä¸ªå¾ˆä¸æ–¹ä¾¿çš„åœ°æ–¹ã€‚</p><blockquote><ul><li><p>æ¯æ¬¡æ–°å»ºå®¹å™¨ï¼Œè¿”å›çš„ IP åœ°å€ä¸èƒ½ä¿è¯ç›¸åŒï¼Œå¯¼è‡´è¦æ›´æ¢ IP åœ°å€è®¿é—® WordPressã€‚</p></li><li><p>WordPress å®‰è£…åœ¨å®¹å™¨é‡Œé¢ï¼Œæœ¬åœ°æ— æ³•ä¿®æ”¹æ–‡ä»¶ã€‚</p></li></ul></blockquote><p>è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜å¾ˆå®¹æ˜“ï¼Œåªè¦æ–°å»ºå®¹å™¨çš„æ—¶å€™ï¼ŒåŠ ä¸¤ä¸ªå‘½ä»¤è¡Œå‚æ•°å°±å¯ä»¥äº†ã€‚</p><p>å…ˆæŠŠåˆšæ‰å¯åŠ¨çš„ WordPress å®¹å™¨ç»ˆæ­¢ï¼ˆå®¹å™¨æ–‡ä»¶ä¼šè‡ªåŠ¨åˆ é™¤ï¼‰ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>docker container stop wordpress
</span></span></code></pre></td></tr></table></div></div><p>ç„¶åï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ–°å»ºå¹¶å¯åŠ¨ WordPress å®¹å™¨ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>docker container run <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -d <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  -p 127.0.0.2:8080:80 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --rm <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --name wordpress <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --env <span class=nv>WORDPRESS_DB_PASSWORD</span><span class=o>=</span><span class=m>123456</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --env <span class=nv>WORDPRESS_DB_USER</span><span class=o>=</span>root <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --link wordpressdb:mysql <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --volume <span class=s2>&#34;</span><span class=nv>$PWD</span><span class=s2>/wordpress&#34;</span>:/var/www/html <span class=se>\\ </span></span></span><span class=line><span class=cl><span class=se></span>  wordpress
</span></span></code></pre></td></tr></table></div></div><p>ä¸Šé¢çš„å‘½ä»¤è·Ÿå‰é¢ç›¸æ¯”ï¼Œå‘½ä»¤è¡Œå‚æ•°åªå¤šå‡ºäº†ä¸¤ä¸ªã€‚</p><blockquote><ul><li><p><code>-p 127.0.0.2:8080:80</code>ï¼šå°†å®¹å™¨çš„ 80 ç«¯å£æ˜ å°„åˆ°<code>127.0.0.2</code>çš„<code>8080</code>ç«¯å£ã€‚</p></li><li><p><code>--volume "$PWD/wordpress":/var/www/html</code>ï¼šå°†å®¹å™¨çš„<code>/var/www/html</code>ç›®å½•æ˜ å°„åˆ°å½“å‰ç›®å½•çš„<code>wordpress</code>å­ç›®å½•ã€‚</p></li></ul></blockquote><p>æµè§ˆå™¨è®¿é—®<code>127.0.0.2:8080</code>å°±èƒ½çœ‹åˆ° WordPress çš„å®‰è£…æç¤ºäº†ã€‚è€Œä¸”ï¼Œä½ åœ¨<code>wordpress</code>å­ç›®å½•ä¸‹çš„æ¯æ¬¡ä¿®æ”¹ï¼Œéƒ½ä¼šåæ˜ åˆ°å®¹å™¨é‡Œé¢ã€‚</p><img src=https://happy3-data.oss-cn-hangzhou.aliyuncs.com/content-images/VjVIgk6FeM.jpg alt=VjVIgk6FeM style=zoom:33%><p>æœ€åï¼Œç»ˆæ­¢è¿™ä¸¤ä¸ªå®¹å™¨ï¼ˆå®¹å™¨æ–‡ä»¶ä¼šè‡ªåŠ¨åˆ é™¤ï¼‰ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>docker container stop wordpress wordpressdb
</span></span></code></pre></td></tr></table></div></div><a href=#å››æ–¹æ³•-cdocker-compose-å·¥å…·><h3 id=å››æ–¹æ³•-cdocker-compose-å·¥å…·><span class=hanchor arialabel=Anchor># </span>å››ã€æ–¹æ³• Cï¼šDocker Compose å·¥å…·</h3></a><p>ä¸Šé¢çš„æ–¹æ³• B å·²ç»æŒºç®€å•äº†ï¼Œä½†æ˜¯å¿…é¡»è‡ªå·±åˆ†åˆ«å¯åŠ¨ä¸¤ä¸ªå®¹å™¨ï¼Œå¯åŠ¨çš„æ—¶å€™ï¼Œè¿˜è¦åœ¨å‘½ä»¤è¡Œæä¾›å®¹å™¨ä¹‹é—´çš„è¿æ¥ä¿¡æ¯ã€‚å› æ­¤ï¼ŒDocker æä¾›äº†ä¸€ç§æ›´ç®€å•çš„æ–¹æ³•ï¼Œæ¥ç®¡ç†å¤šä¸ªå®¹å™¨çš„è”åŠ¨ã€‚</p><a href=#41-docker-compose-ç®€ä»‹><h4 id=41-docker-compose-ç®€ä»‹><span class=hanchor arialabel=Anchor># </span>4.1 Docker Compose ç®€ä»‹</h4></a><p><img src=https://happy3-data.oss-cn-hangzhou.aliyuncs.com/content-images/KulToe4cJl.jpg width=auto alt=KulToe4cJl></p><p><a href=https://docs.docker.com/compose/ rel=noopener>Compose</a> æ˜¯ Docker å…¬å¸æ¨å‡ºçš„ä¸€ä¸ªå·¥å…·è½¯ä»¶ï¼Œå¯ä»¥ç®¡ç†å¤šä¸ª Docker å®¹å™¨ç»„æˆä¸€ä¸ªåº”ç”¨ã€‚ä½ éœ€è¦å®šä¹‰ä¸€ä¸ª
<a href=https://www.ruanyifeng.com/blog/2016/07/yaml.html rel=noopener>YAML</a> æ ¼å¼çš„é…ç½®æ–‡ä»¶<code>docker-compose.yml</code>ï¼Œå†™å¥½å¤šä¸ªå®¹å™¨ä¹‹é—´çš„è°ƒç”¨å…³ç³»ã€‚ç„¶åï¼Œåªè¦ä¸€ä¸ªå‘½ä»¤ï¼Œå°±èƒ½åŒæ—¶å¯åŠ¨/å…³é—­è¿™äº›å®¹å™¨ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl><span class=c1># å¯åŠ¨æ‰€æœ‰æœåŠ¡</span>
</span></span><span class=line><span class=cl>docker compose up
</span></span><span class=line><span class=cl><span class=c1># å…³é—­æ‰€æœ‰æœåŠ¡</span>
</span></span><span class=line><span class=cl>docker compose stop
</span></span></code></pre></td></tr></table></div></div><a href=#42-docker-compose-çš„å®‰è£…><h4 id=42-docker-compose-çš„å®‰è£…><span class=hanchor arialabel=Anchor># </span>4.2 Docker Compose çš„å®‰è£…</h4></a><p>Mac å’Œ Windows åœ¨å®‰è£… docker çš„æ—¶å€™ï¼Œä¼šä¸€èµ·å®‰è£… docker composeã€‚Linux ç³»ç»Ÿä¸‹çš„å®‰è£…å‚è€ƒ
<a href=https://docs.docker.com/compose/install/#install-compose rel=noopener>å®˜æ–¹æ–‡æ¡£</a>ã€‚</p><p>å®‰è£…å®Œæˆåï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>docker compose version
</span></span><span class=line><span class=cl>Docker Compose version v2.6.0
</span></span></code></pre></td></tr></table></div></div><a href=#43-wordpress-ç¤ºä¾‹><h4 id=43-wordpress-ç¤ºä¾‹><span class=hanchor arialabel=Anchor># </span>4.3 WordPress ç¤ºä¾‹</h4></a><p>åœ¨<code>docker-demo</code>ç›®å½•ä¸‹ï¼Œæ–°å»º<code>docker-compose.yml</code>æ–‡ä»¶ï¼Œå†™å…¥ä¸‹é¢çš„å†…å®¹ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>version: <span class=s2>&#34;3&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>services:
</span></span><span class=line><span class=cl>  mysql:
</span></span><span class=line><span class=cl>    image: mysql:5.7
</span></span><span class=line><span class=cl>    environment:
</span></span><span class=line><span class=cl>     - <span class=nv>MYSQL_ROOT_PASSWORD</span><span class=o>=</span><span class=m>123456</span>
</span></span><span class=line><span class=cl>     - <span class=nv>MYSQL_DATABASE</span><span class=o>=</span>wordpress
</span></span><span class=line><span class=cl>  web:
</span></span><span class=line><span class=cl>    image: wordpress
</span></span><span class=line><span class=cl>    links:
</span></span><span class=line><span class=cl>     - mysql
</span></span><span class=line><span class=cl>    environment:
</span></span><span class=line><span class=cl>     - <span class=nv>WORDPRESS_DB_PASSWORD</span><span class=o>=</span><span class=m>123456</span>
</span></span><span class=line><span class=cl>     - <span class=nv>WORDPRESS_DB_USER</span><span class=o>=</span>root
</span></span><span class=line><span class=cl>    ports:
</span></span><span class=line><span class=cl>     - <span class=s2>&#34;127.0.0.3:8080:80&#34;</span>
</span></span><span class=line><span class=cl>    working_dir: /var/www/html
</span></span></code></pre></td></tr></table></div></div><p>ä¸Šé¢ä»£ç ä¸­ï¼Œä¸¤ä¸ªé¡¶å±‚æ ‡ç­¾è¡¨ç¤ºæœ‰ä¸¤ä¸ªå®¹å™¨<code>mysql</code>å’Œ<code>web</code>ã€‚æ¯ä¸ªå®¹å™¨çš„å…·ä½“è®¾ç½®ï¼Œå‰é¢éƒ½å·²ç»è®²è§£è¿‡äº†ï¼Œè¿˜æ˜¯æŒºå®¹æ˜“ç†è§£çš„ã€‚</p><p>å¯åŠ¨ä¸¤ä¸ªå®¹å™¨ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>docker compose up
</span></span></code></pre></td></tr></table></div></div><p>æµè§ˆå™¨è®¿é—® http://127.0.0.3:8080ï¼Œåº”è¯¥å°±èƒ½çœ‹åˆ° WordPress çš„å®‰è£…ç•Œé¢ã€‚</p><img src=https://happy3-data.oss-cn-hangzhou.aliyuncs.com/content-images/rbQBhnSKGe.jpg alt=rbQBhnSKGe style=zoom:50%><p>ç°åœ¨å…³é—­ä¸¤ä¸ªå®¹å™¨ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>docker compose stop
</span></span></code></pre></td></tr></table></div></div><p>å…³é—­ä»¥åï¼Œè¿™ä¸¤ä¸ªå®¹å™¨æ–‡ä»¶è¿˜æ˜¯å­˜åœ¨çš„ï¼Œå†™åœ¨é‡Œé¢çš„æ•°æ®ä¸ä¼šä¸¢å¤±ã€‚ä¸‹æ¬¡å¯åŠ¨çš„æ—¶å€™ï¼Œè¿˜å¯ä»¥å¤ç”¨ã€‚ä¸‹é¢çš„å‘½ä»¤å¯ä»¥æŠŠè¿™ä¸¤ä¸ªå®¹å™¨æ–‡ä»¶åˆ é™¤ï¼ˆå®¹å™¨å¿…é¡»å·²ç»åœæ­¢è¿è¡Œï¼‰ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-Bash data-lang=Bash><span class=line><span class=cl>docker compose rm
</span></span></code></pre></td></tr></table></div></div><a href=#äº”å‚è€ƒé“¾æ¥><h3 id=äº”å‚è€ƒé“¾æ¥><span class=hanchor arialabel=Anchor># </span>äº”ã€å‚è€ƒé“¾æ¥</h3></a><ul><li><p><a href=https://www.sitepoint.com/how-to-manually-build-docker-containers-for-wordpress/ rel=noopener>How to Manually Build Docker Containers for WordPress</a>, by Aleksander Koko</p></li><li><p><a href=https://www.sitepoint.com/how-to-use-the-official-docker-wordpress-image/ rel=noopener>How to Use the Official Docker WordPress Image</a>, by Aleksander Koko</p></li><li><p><a href=https://www.sitepoint.com/deploying-wordpress-with-docker/ rel=noopener>Deploying WordPress with Docker</a>, by Aleksander Koko</p></li></ul></article><hr><div class=page-end id=footer><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li><a href=/digital-garden/notes/devops/ data-ctx="Dockerè¿›é˜¶ï¼šstep by step" data-src=/notes/devops class=internal-link>DevOps</a></li><li><a href=/digital-garden/notes/hands-on-docker_1/ data-ctx="Dockerè¿›é˜¶ï¼šstep by step" data-src=/notes/hands-on-docker_1 class=internal-link>Dockerå…¥é—¨</a></li></ul></div><div><script src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://yangls06.github.io/digital-garden/js/graph.abd4bc2af3869a96524d7d23b76152c7.js></script></div></div><div id=contact_buttons><footer><p>Made by yangls06 using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, Â© 2022</p><ul><li><a href=https://yangls06.github.io/digital-garden/>Home</a></li><li><a href=https://github.com/yangls06>Github</a></li></ul></footer></div></div></body></html>